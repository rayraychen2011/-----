---

# 🎮 敲磚塊遊戲程式筆記

## 1. 套件與模組

* **pygame** → 遊戲框架
* **sys** → 系統操作 (exit)
* **random** → 隨機數，用來產生隨機顏色 / 發射方向
* **typing.Tuple** → 型別註解用

---

## 2. 類別設計

### Brick（磚塊 / 底板共用）

屬性：

- `x, y` → 左上角座標
- `width, height` → 磚塊大小
- `color` → 顏色 `(R,G,B)`
- `hit` → 是否被打掉

方法：

- `draw(surface, x=None, y=None)`

  - hit = True → 不繪製
  - 支援臨時繪製位置（不改內部座標）

---

### Ball（球）

屬性：

- `x, y` → 中心座標 (float)
- `radius` → 半徑
- `vx, vy` → 速度向量
- `color` → 顏色

方法：

- `draw(surface)` → 畫球
- `rect()` → 回傳球的外接矩形（用於碰撞檢測）

---

## 3. 初始化

- 視窗：`800 x 600`
- FPS：60
- 字型：預設 (28pt)

---

## 4. 磚塊牆配置

- `rows=5, cols=10`
- 每顆磚：`60x24`
- 間距：`gap=4`
- `x_offset` 計算水平方向置中
- `y_offset=60` 磚牆與頂端距離

顏色：

- 利用 **漸層 (lerp_color)** + **隨機抖動 jitter**
- 支援方向：`horizontal / vertical / diagonal`
- `reset_bricks()` → 重置 hit 與重新產生漸層顏色

---

## 5. 底板 (Paddle)

- 使用 **Brick** 類別
- 寬度 = 磚塊的 1.8 倍
- 高度 ≈ 磚塊高度
- 固定 y 座標（離底部 48）
- x 座標根據滑鼠移動（保持中心對齊滑鼠）

---

## 6. 球的初始狀態

- 一開始 **附著在底板上** (`ball_attached=True`)
- 空白鍵 / 滑鼠右鍵 → 發射

  - 隨機水平方向 vx
  - vy 固定向上 (-5)

---

## 7. 主遊戲迴圈 (while True)

### 事件處理

- **QUIT** → 結束
- **MOUSEBUTTONDOWN (右鍵)** → 發射球
- **KEYDOWN**

  - `R` → 重新產生漸層
  - `G` → 輸出漸層參數
  - `SPACE` → 發射球
  - `Q` → 切換操作說明顯示
  - `ESC` → 離開

---

### 更新邏輯

1. **背景清空 (黑色)**
2. **顯示剩餘方塊數**
3. **底板更新**

   - 跟隨滑鼠
   - 不超出邊界

4. **球狀態**

   - 若附著 → 固定在底板上方，不更新物理
   - 若發射 → 更新位置 (x+=vx, y+=vy)

5. **碰撞檢測**

   - 牆壁 → 反彈
   - 上牆 → vy 反轉
   - 下邊界 → reset_bricks() + 球重新附著
   - 底板 → vy 反轉，並依照撞擊位置調整 vx
   - 磚塊 → hit=True，並反轉 vx 或 vy

6. **繪製物件**

   - 球
   - 磚塊 (hit=False 才會顯示)

7. **更新畫面** → `pygame.display.update()`

---

## 8. 遊戲玩法

- 滑鼠左右移動底板接球
- **空白鍵 / 右鍵** → 發射球
- **R** → 變換磚塊漸層
- **G** → 印出漸層資訊
- **ESC** → 離開
- 若球掉到底部 → **磚塊重置 + 球回到底板**

---

📌 這個版本就是 **最小可玩敲磚塊**：

- 磚塊排列 + 漸層顏色
- 球、底板、基礎反彈
- 簡單遊戲流程

---
